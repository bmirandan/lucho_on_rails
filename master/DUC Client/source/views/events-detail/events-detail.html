<div class="ibox float-e-margins">
	<div class="ibox-title">
		<h5>Detalle de eventos</h5>
		<span class="label label-primary">!!!</span>
		<div class="ibox-tools">
			<a class="collapse-link">
				<i class="fa fa-chevron-up"></i>
			</a>
		</div>
	</div>
	<div class="ibox-content">
		<h2 ng-show="report=='day'">
		Detalle de eventos de uso de celular para el {{getReportTitleHumanized()}}
		</h2>
		<form role="form" class="form-inline ng-pristine ng-valid" ng-show="!uiLocked">

			<div class="row ">

				<div class="col-lg-6">
					<div>
						<label>Período de tiempo</label>
					</div>

					<div data-toggle="buttons" class="btn-group" uib-dropdown>

						<label class="btn btn-sm btn-white active" ng-model="dateFilterEvents" uib-btn-radio="'last-day'" ng-click="filterEventDetails()"> Último día </label>

						<label class="btn btn-sm btn-white" ng-model="dateFilterEvents" uib-btn-radio="'last-week'" ng-click="filterEventDetails()"> Última semana </label>

						<label class="btn btn-sm btn-white" ng-model="dateFilterEvents" uib-btn-radio="'all'" ng-click="filterEventDetails()">
							Histórico </label>

						<label class="btn btn-sm btn-white" ng-model="dateFilterEvents" uib-btn-radio="'range'" ng-click="filterEventDetails()"> Período </label>

					</div>

					<div ng-show="dateFilterEvents=='range'">
						<div class="row">
							<div class="col-xs-6">
								Desde
								<div class="input-group date ">
									<input class="form-control" date-time ng-model="startDate" view="date" auto-close="true" min-view="date" format="YYYY-MM-DD" date-change="updateStartDate">
									<span class="input-group-addon"><i class="fa fa-calendar"></i></span>
								</div>
							</div>
							<div class="col-xs-6">
								Hasta
								<div class="input-group date ">
									<input class="form-control" date-time ng-model="finishDate" view="date" auto-close="true" min-view="date" format="YYYY-MM-DD" date-change="updateFinishDate">
									<span class="input-group-addon"><i class="fa fa-calendar"></i></span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-6">
					<div>
						<label>Conductor</label>
					</div>
					<div class="btn-group dropdown open" uib-dropdown="" class="col-md-6">
						<button type="button" class="btn btn-default dropdown-toggle" uib-dropdown-toggle="" aria-haspopup="true" aria-expanded="true">
							{{selectedDriver!==undefined?selectedDriver.name:'Todos'}}<span class="caret"></span>
						</button>
						<ul role="menu" uib-dropdown-menu="" class="dropdown-menu">
							<li ng-repeat="d in drivers"><a ng-click="selectDriver(d)">{{d.name}}</a></li>
							<li class="divider"></li>
							<li><a ng-click="selectDriver()">Todos</a></li>
						</ul>
					</div>
				</div>
			</div>
		</form>

		<div class="hr-line-dashed"></div>
		<div class="row">
			<div ng-show="processedEvents.length">
				<div class="col-lg-6">
					<!--<div class="embed-responsive embed-responsive-16by9">
					<div class="ibox-content">-->
					<!--
						<div class="flot-chart">
							<div flot class="flot-chart-content" dataset="flotMultiData" options="flotMultiOptions"></div>

						</div>-->
					<vis-timeline data="data" options="options" events="events"></vis-timeline>
					<!--</div>
				</div>-->
				</div>
				<div class="col-lg-6">
					<div ng-show="processedEvents.length>0">
						
						<div ng-show="processedEvents.length>paginationNumPerPage">
							<p>Mostrando del {{paginationNumPerPage*(paginationCurrentPage-1)+1}} al {{paginationNumPerPage*paginationCurrentPage}} de {{processedEvents.length}} entradas</p>
						</div>
						<div ng-show="processedEvents.length<=paginationNumPerPage">
							<p>Mostrando las {{processedEvents.length}} entradas</p>
						</div>


						<table class="table">
							<thead>
								<tr>
									<th>Conductor</th>
									<th>Hora inicio</th>
									<th>Duración</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="e in paginationGetPageItems() |orderBy:'start'">
									<td>{{getDriverById(e.driverId).name}} </td>
									<td>{{formatDate(e.start)}} </td>
									<!-- TODO: humanize -->
									<td>{{formatDuration(e.start, e.finish)}} s</td>
								</tr>

							</tbody>
						</table>
					</div>
					<ul ng-show="paginationNumOfElements>0 && processedEvents.length > paginationNumPerPage" uib-pagination total-items="processedEvents.length" ng-model="paginationCurrentPage" class="pagination-sm" boundary-link-numbers="true" items-per-page="paginationNumPerPage" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></ul>
				</div>

			</div>

			<div class="col-lg-12" ng-show="paginationNumOfElements == 0 || processedEvents.length == 0">
				<div class="alert alert-warning">No hay eventos para el período seleccionado</div>
			</div>

		</div>



	</div>
</div>